@using App_Data.Models;
@using Microsoft.AspNetCore.Identity
@inject SignInManager<NguoiDung> SignInManager
@inject UserManager<NguoiDung> UserManager
@*<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>*@
<!--====== Tab 3 ======-->
<style>
    .dropbtn {
        background-color: #3498DB;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
    }

        /* Dropdown button on hover & focus */
        .dropbtn:hover, .dropbtn:focus {
            background-color: #2980B9;
        }

    /* The container <div> - needed to position the dropdown content */
    .dropdown {
        position: relative;
        display: inline-block;
    }

    /* Dropdown Content (Hidden by Default) */
    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
    }

        /* Links inside the dropdown */
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

            /* Change color of dropdown links on hover */
            .dropdown-content a:hover {
                background-color: #ddd;
            }

    /* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
    .show {
        display: block;
    }
</style>
<div class="tab-pane fade show active" id="pd-rev">
    <div class="pd-tab__rev">
        <div class="u-s-m-b-30">
            <div class="pd-tab__rev-score">
                <div class="u-s-m-b-8">
                    <h2>23 Đánh giá - 4.6 (Tổng thể)</h2>
                </div>
                <div class="gl-rating-style-2 u-s-m-b-8"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div>
                <div class="u-s-m-b-8">
                    <h4>Chúng tôi muốn lắng nghe ý kiến của bạn!</h4>
                </div>

                <span class="gl-text">Hãy cho chúng tôi những gì bạn nghĩ về sản phẩm này</span>
            </div>
        </div>
        <div class="u-s-m-b-30">
            <form class="pd-tab__rev-f1">
                <div class="rev-f1__group">
                    <div class="u-s-m-b-15">
                        <h2>23 Review(s) for Man Ruched Floral Applique Tee</h2>
                    </div>
                    <div class="u-s-m-b-15">

                        <label for="sort-review"></label><select class="select-box select-box--primary-style" id="sort-review">
                            <option selected>Sort by: Best Rating</option>
                            <option>Sort by: Worst Rating</option>
                        </select>
                    </div>
                </div>
                <div class="rev-f1__review">

                    <div class="review-o u-s-m-b-15">
                        <div class="review-o__info u-s-m-b-8">
                            @if (SignInManager.IsSignedIn(User))
                            {
                                var user = await UserManager.GetUserAsync(User);
                                <img style="margin-bottom:-35px;width:50px;height:50px; object-fit:cover; border-radius:30px" src="@user.AnhDaiDien">
                            }

                            <span class="review-o__name" style="margin-left:10px">John Doe</span>
                            <span class="review-o__name">
                                <div class="review-o__rating gl-rating-style u-s-m-b-8" style="margin-left:60px">
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>

                                </div>
                            </span>
                            <span class="review-o__name" style="margin-left:60px">27 Feb 2018 10:57:43 | Phân loại hàng: Trắng,L (45-51kg:M53-M59)</span>
                        </div>

                        <p class="review-o__text" style="margin-left:60px">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                        <br />

                        <div style="width:91%;margin-left:60px;background:#d5d5d5;">
                            <br />
                            <span style="margin-left:10px;" class="review-o__name">Phản Hồi Của Shop</span>
                            <br />
                            <p class="review-o__text" style="margin-left:10px;">Dạ shop cám ơn ak </p>
                            <br />
                        </div>
                        <br />
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-left: 60px;">
                            <div>
                                <button type="button" id="likeButton" style="background-color: white; cursor: pointer; border: none;">
                                    <i id="likeIcon" class="fas fa-thumbs-up" style="color: #d5d5d5;"></i>
                                </button>
                                <span class="review-o__name">Hữu ích?</span>
                            </div>
                            <div class="dropdown">
                                <button onclick="myFunction()" class="dropbtn" id="ellipsisButton" style="background-color: white; cursor: pointer; border: none;">
                                    <i id="ellipsisIcon" style="color: #d5d5d5;" class="fas fa-ellipsis-v"></i>
                                </button>
                                <div id="myDropdown" style="width:102px;" class="dropdown-content">

                                    <button onclick="preventDefaultAndShowModal()" style="width:102px;" data-bs-toggle="modal" data-bs-target="#myModal"> <span class="review-o__name">Báo cáo</span></button>
                                </div>
                            </div>
                            

                        </div>

                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal" id="myModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Modal Heading</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                Modal body..
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>
<script>
    function preventDefaultAndShowModal() {
        event.preventDefault(); // Ngăn chặn hành vi mặc định của liên kết
        var myModal = new bootstrap.Modal(document.getElementById('myModal'));
        myModal.show();
    }
</script>
<script>

    function myFunction() {
        event.preventDefault();
        document.getElementById("myDropdown").classList.toggle("show");
    }
    window.onclick = function (event) {
        if (!event.target.matches('.dropbtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
</script>
<script>
    const likeButton = document.getElementById('likeButton');
    const likeIcon = document.getElementById('likeIcon');

    let isLiked = false;

    likeButton.addEventListener('click', function () {
        if (isLiked) {
            likeIcon.style.color = '#d5d5d5'; // Đổi màu icon về màu cũ
        } else {
            likeIcon.style.color = 'red'; // Đổi màu icon sang màu đỏ
        }

        isLiked = !isLiked; // Đảo ngược trạng thái "đã thích"
    });
</script>

<!--====== End - Tab 3 ======-->
